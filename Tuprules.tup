# vim: set ts=8 sw=8 sts=8 noet tw=78:
.gitignore

CC = gcc

ifeq (@(TUP_DEBUG),y)
	CFLAGS += -g
else
	CFLAGS += -Os
endif
CFLAGS += -W
CFLAGS += -Wall
ifeq (@(TUP_WERROR),y)
	CFLAGS += -Werror
endif
CFLAGS += -Wbad-function-cast
CFLAGS += -Wcast-align
CFLAGS += -Wcast-qual
CFLAGS += -Wchar-subscripts
CFLAGS += -Wmissing-prototypes
CFLAGS += -Wnested-externs
CFLAGS += -Wpointer-arith
CFLAGS += -Wredundant-decls
CFLAGS += -Wshadow
CFLAGS += -Wstrict-prototypes
CFLAGS += -Wwrite-strings
CFLAGS += -fno-common
CFLAGS += -I$(TUP_CWD)/src

!cc = |> ^ CC %f^ $(CC) -c %f -o %o $(CFLAGS) $(CFLAGS_%f) |>
!ld = |> ^ LINK %o^ $(CC) %f -o %o $(LDFLAGS) $(LDFLAGS_%o) |>
!ar = |> ^ AR %o^ ar crs %o %f |>
!dot = |> ^ DOT %f^ dot -Efontname="Luxi Sans" -Nfontname="Luxi Sans" -Efontsize=10 -Nfontsize=10 -Tpng %f > %o |>

FPIC = -fpic
SHARED = -shared
include @(TUP_PLATFORM).tup
